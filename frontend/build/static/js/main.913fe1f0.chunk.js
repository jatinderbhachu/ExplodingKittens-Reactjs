(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(63),i=a.n(o),l=(a(72),a(10)),c=a(15),s=a(16),d=a(36),u=a(35),m=a(17),b=a(6),f=a(1),p=r.a.createContext({selectedCards:[]});a(73);var v=function(e,t){return JSON.stringify({type:e,data:t})},y=new(function(){function e(){Object(c.a)(this,e),this.socket=void 0,this.connect()}return Object(s.a)(e,[{key:"connect",value:function(){var e=this,t="https:"===window.location.protocol?"wss://":"ws://";this.socket=new WebSocket(t+window.location.hostname+":8080"),this.socket.onopen=function(e){console.log("socket is open"),document.dispatchEvent(new CustomEvent("socket_state_change",{detail:WebSocket.OPEN}))},this.socket.onclose=function(t){console.log("Socket connection closed, retrying in 3 seconds"),document.dispatchEvent(new CustomEvent("socket_state_change",{detail:WebSocket.CLOSED})),setTimeout(e.connect,3e3)},console.log(this.socket),this.socket.onmessage=function(t){var a=JSON.parse(t.data);console.log(a),e.dispatchEvent(new CustomEvent(a.type,{detail:a.data}))}}},{key:"dispatchEvent",value:function(e){this.socket.dispatchEvent(e)}},{key:"addEventListener",value:function(e,t){this.socket.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.socket.removeEventListener(e,t)}},{key:"send",value:function(e,t){this.socket.send(v(e,t))}}]),e}());function h(e){var t=e.player,a=e.uid;return r.a.createElement("div",{className:"LobbyPlayer",id:t.id},r.a.createElement("div",{className:"PlayerName"},t.name),a!==t.id&&e.isHost&&r.a.createElement("button",{className:"KickButton",onClick:e.handleKick},"X"))}var E=function(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),o=a[0],i=a[1],l=Object(n.useContext)(p),c=Object(f.f)(),s=Object(f.g)().id,d=Object(n.useRef)();function u(e){var t=e.detail;l.lobbyID=t.settings.inviteCode;var a,n=Object(m.a)(t.players);try{for(n.s();!(a=n.n()).done;){var r=a.value;r.id===l.ID&&(l.isHost=r.isHost)}}catch(o){n.e(o)}finally{n.f()}i(t.players)}function v(e){var t=e.detail;l.inGame=!0,l.currentTurn=t.currentTurn,c.push("/game")}function E(e){var t=e.target.parentElement.id;l.isHost&&y.send("kick_player",{lobbyID:l.lobbyID,playerID:t})}function g(){c.goBack()}Object(n.useEffect)((function(){return y.addEventListener("update_lobby",u),y.addEventListener("start_game",v),y.addEventListener("kick",g),void 0===s?(console.log("Creating lobby"),l.isHost=!0,y.send("join_lobby",{playerName:l.playerName})):(console.log("Joining lobby"),l.isHost=!1,y.send("join_lobby",{playerName:l.playerName,inviteCode:s})),console.log("ID: ",s),function(){y.removeEventListener("update_lobby",u),y.removeEventListener("start_game",v),y.removeEventListener("kick",g)}}),[]);var k=l.isHost,C=l.lobbyID;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"AppHeader"},r.a.createElement("h1",null,"Exploding Kittens")),r.a.createElement("div",{className:"CreateLobby-Container"},r.a.createElement("h1",null,r.a.createElement("button",{onClick:function(){return y.send("leave_lobby",{lobbyID:l.lobbyID}),l.lobbyID=void 0,void c.goBack()}},"< Back"),"Create Custom Lobby"),r.a.createElement("div",{className:"CreateLobby"},r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault();var t=e.target;y.send("try_start_game",{settings:{name:t.lobbyName.value},lobbyCode:l.lobbyID})}(e)}},r.a.createElement("h3",null,"Lobby Settings"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-25"},r.a.createElement("label",{htmlFor:"lobbyName"},"Lobby Name")),r.a.createElement("div",{className:"col-75"},r.a.createElement("input",{disabled:!k,type:"text",name:"lobbyName",id:"lobbyName"}))),r.a.createElement("input",{disabled:!k||o.length<2,type:"submit",value:"Start Game"}),r.a.createElement("br",null),!1),r.a.createElement("div",{className:"CreateLobby-Player-Container"},r.a.createElement("h3",null,"Players"),r.a.createElement("div",{className:"CreateLobby-Player"},o.map((function(e){return r.a.createElement(h,{key:e.id,player:e,uid:l.ID,handleKick:E,isHost:k})}))))),k&&r.a.createElement("div",{className:"Invite"},"Invite Link: (Click to copy)",r.a.createElement("div",{onClick:function(){return function(){var e=document.createRange();e.selectNode(d.current),window.getSelection().removeAllRanges(),window.getSelection().addRange(e),document.execCommand("copy"),window.getSelection().removeAllRanges()}()},ref:d},window.location.origin+"/lobby/"+C))))};a(78);var g=function(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),o=a[0],i=a[1],l=Object(f.f)();function c(e){var t=e.detail;i(t.lobbies)}function s(){y.send("get_lobby_list",{})}return Object(n.useEffect)((function(){return y.addEventListener("update_lobby_list",c),o.length<1&&s(),function(){y.removeEventListener("update_lobby_list",c)}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"AppHeader"},r.a.createElement("h1",null,"Exploding Kittens")),r.a.createElement("div",{className:"LobbyBrowser LobbyItem"},r.a.createElement("div",{className:"Back"},r.a.createElement("button",{onClick:function(){return l.goBack()}},"Back")),r.a.createElement("span",null,"Lobby browser",r.a.createElement("button",{onClick:function(){return s()}},"Refresh list")),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Lobby name"),r.a.createElement("td",null,"Players"),r.a.createElement("td",null,"Game status"),r.a.createElement("td",null))),r.a.createElement("tbody",null,o.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.players),r.a.createElement("td",null,e.state),r.a.createElement("td",null,"IN_LOBBY"===e.state&&r.a.createElement("button",{onClick:function(){return t=e.lobbyID,void l.push("/lobby/"+t);var t}},"Join")))}))))))},k=a(66);a(79);var C=function(e){var t=Object(f.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"AppHeader"},r.a.createElement("h1",null,"Exploding Kittens")),r.a.createElement("div",{className:"Welcome-Container"},r.a.createElement("div",{className:"BrowseButtons"},r.a.createElement("button",{type:"submit",onClick:function(e){return function(e){e.preventDefault(),t.push("/browser")}(e)}},"Browse Lobbies"),r.a.createElement("button",{type:"submit",onClick:function(e){return function(e){e.preventDefault(),t.push("/createLobby")}(e)}},"Create Custom Lobby")),r.a.createElement("div",{className:"WelcomeInfo"},r.a.createElement("h3",null,"About"),r.a.createElement("p",null,"This is a clone of the Exploding kittens game, but now you can play it in your browser!"))))};a(80);var w=function(e){var t=Object(n.useState)(""),a=Object(b.a)(t,2),o=a[0],i=a[1],l=Object(n.useContext)(p);return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"AppHeader"},r.a.createElement("h1",null,"Exploding Kittens")),r.a.createElement("div",{className:"NameForm-Container"},r.a.createElement("div",{className:"NameForm"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),l.playerName=o,e.setNameHandler(o)}},r.a.createElement("input",{type:"text",name:"nickname",id:"nickname",placeholder:"Enter nickname ... ",value:o,onChange:function(e){return i(e.target.value)},required:!0}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Set name"})))))},N=a(13),O=a(7),j=a(65);var x={favor:"Select another player and force them to hand over a card of their choice",attack:"Skip your turn, next player must draw 2 cards",cat1:"Use in combination with another cat card to steal any card from anyone",cat2:"Use in combination with another cat card to steal any card from anyone",cat3:"Use in combination with another cat card to steal any card from anyone",cat4:"Use in combination with another cat card to steal any card from anyone",cat5:"Use in combination with another cat card to steal any card from anyone",skip:"End your turn without drawing a card",defuse:"Defuse an exploding kitten card",exploding:":]",shuffle:"Shuffle the draw pile",nope:"Cancel any action except a defuse or exploding kitten",future:"Peak at 3 cards on top of the draw pile"};function I(e){return r.a.createElement("div",{className:"Card ".concat(e.hoverable?"Hoverable":""," ").concat(e.selected?"selected":""," ").concat(e.cardName),onClick:e.changeSelectedCards,style:e.position},r.a.createElement("div",{className:"CardToolTip"},x[e.cardName]))}var D=function(e){var t=e.cards,a=e.initialPos,n=e.boundary,o=e.selectable,i=(n.width-9)/t.length,l=[];o&&(l=e.selectedCards);var c=0;return Array.isArray(t)?r.a.createElement(r.a.Fragment,null,e.name&&r.a.createElement("div",{className:"OpponentName",style:{top:a.y-5+"%",left:a.x+(0|i)*c+"%"}},e.name),t.map((function(n,o){return r.a.createElement(I,{hoverable:e.hoverable,selected:-1!==l.indexOf(o),key:o,cardName:n,cardIndex:o,changeSelectedCards:e.selectable?function(){return function(a){var n=e.selectedCards;e.favorTarget||n.length<1?e.changeSelectedCards([a]):t[n[0]].includes("cat")&&t[a].includes("cat")&&-1===n.indexOf(a)?e.changeSelectedCards([].concat(Object(N.a)(n),[a])):e.changeSelectedCards([a])}(o)}:void 0,position:{top:a.y+"%",left:a.x+i*c+++"%"}})}))):(i=(n.width-9)/t,n.width<=9&&"opponent"===e.type&&(i=0),r.a.createElement(r.a.Fragment,null,Array.from({length:t},(function(t,n){return r.a.createElement("div",{className:"Card ".concat(e.hoverable?"Hoverable":""," nonameCard"),key:n,style:{top:a.y+"%",left:a.x+i*c+++"%"},onClick:e.selectable?function(){return e.setSelectPosition(n)}:void 0})})),e.name&&r.a.createElement("div",{className:"OpponentName",style:{top:a.y-5+"%",left:a.x+i*(t/2)+"%"}},e.name)))};a(160);var S=function(e){var t,a=e.clickHandler,n=e.position,o=e.size,i=e.type;switch(i){case"selectable":t="CardStackOverlay";break;case"unselectable":t="CardStackOverlay-unselectable";break;case"dead":t="CardStackOverlay-DeadPlayer"}return r.a.createElement("div",{className:t,style:Object(O.a)(Object(O.a)({},n),o),onClick:"selectable"===i?function(){return a()}:void 0})};var _=function(e){var t=e.opponents,a=e.isStealing,n=e.favorTarget,o=e.askingFavor,i=e.selectStealCard,l=e.selectFavorCard,c=e.selectFavorVictim,s=60/t.length,d=(100-s)/t.length;return t.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:e.id},e.isDead&&r.a.createElement(S,{type:"dead",position:{top:"5%",left:d*t+"%"},size:{width:s+"%",height:"23%"}}),a&&!e.isDead&&r.a.createElement(S,{type:"unselectable",position:{top:"0%",left:d*t+"%"},size:{width:s+"%",height:"28%"}}),r.a.createElement(D,{type:"opponent",key:e.id,cards:e.cards,initialPos:{x:d*t,y:5},boundary:{width:s},name:e.name,selectable:a,hoverable:a,setSelectPosition:function(t){return i(e.id,t)}}),n===e.id&&r.a.createElement(S,{type:"selectable",position:{top:"0%",left:d*t+"%"},size:{width:s+"%",height:"28%"},clickHandler:function(){return l()}}),o&&r.a.createElement(S,{type:"selectable",position:{top:"0%",left:d*t+"%"},size:{width:s+"%",height:"28%"},clickHandler:function(){return c(e.id)}}),e.drewExploding&&r.a.createElement("div",{className:"BombOverlay",style:{top:"5%",left:d*t+"%",width:s+"%",height:"28%"}}))}))};var L=function(e){var t=e.duration,a=e.msg,o=Object(n.useRef)(null),i=[{top:"-14%",opacity:1},{top:"0%",offset:.1},{top:"0%",offset:.9},{opacity:1,offset:.9},{top:"-14%",opacity:0}],l={duration:1e3*t,iterations:1};return Object(n.useEffect)((function(){o.current.animate(i,l)}),[e.msg]),r.a.createElement("div",{className:"ModalNotification",ref:o},a)};a(161);function P(e){var t,a,o=e.winner,i=e.opponents,l=e.ID,c=Object(n.useContext)(p),s=Object(f.f)(),d=Object(m.a)(i);try{for(d.s();!(a=d.n()).done;){var u=a.value;u.id===o&&(t=u.name)}}catch(b){d.e(b)}finally{d.f()}return r.a.createElement("div",{onClick:function(){return y.send("post_game_cleanup",{lobbyID:c.lobbyID}),c.lobbyID=void 0,c.inGame=!1,c.isHost=!1,void s.push("/")},className:"WinnerNotification"},r.a.createElement("h2",null,"GAME OVER"),r.a.createElement("div",null,o===l?"You Won!":"You Lost, the winner is "+t),r.a.createElement("div",null,"Click anywhere to return to home page"))}function T(e){var t=0,a=25,n=25;return r.a.createElement("div",{className:"FutureCardsNotification"},r.a.createElement("h3",null,"Future cards"),e.cards.map((function(e,o){return r.a.createElement("div",{className:"Card FuturePopup "+e,key:o,style:{top:n+"%",left:a+40/3*t+++"%",zIndex:2}})})),r.a.createElement("div",{onClick:function(){return e.resetFutureCards()}},"Click here to close"))}function H(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),o=a[0],i=a[1],l=e.initialPos,c=e.size,s=Object(n.useRef)(null);function d(e){var t=e.detail;i(t.moveHistory)}return Object(n.useEffect)((function(){return y.addEventListener("update_move_history",d),s.current&&s.current.scrollIntoView({behavior:"smooth"}),function(){y.removeEventListener("update_move_history",d)}})),r.a.createElement("div",{className:"MoveHistory",style:{top:l.y+"%",left:l.x+"%",width:c.width+"%",height:c.height+"%"}},r.a.createElement("h3",null,"Move History"),r.a.createElement("div",{className:"MoveHistory-list"},o.map((function(e,t){return r.a.createElement("div",{className:"MoveHistory-item",ref:s,key:t},r.a.createElement("div",null,((a=e.time)-(a%=60))/60+(9<a?":":":0")+a),r.a.createElement("div",null,e.move));var a}))))}var F=function(){var e=Object(n.useContext)(p),t=Object(n.useState)([]),a=Object(b.a)(t,2),o=a[0],i=a[1],l=Object(n.useReducer)((function(e,t){return Object(O.a)(Object(O.a)({},e),t)}),{initialRender:!0,playerCards:[],drawPile:[],discardPile:[],opponents:[],isDead:!1,turnsLeft:void 0,currentTurn:void 0,askingFavor:!1,isStealing:!1,insertingExploding:!1,futureCards:[],favorTarget:void 0,drewExploding:!1,winner:void 0,animCardsInitial:[],animCardsTarget:[],animCardsName:[]}),c=Object(b.a)(l,2),s=c[0],d=c[1],u={x:10,y:43},f={x:60,y:43},v={x:10,y:71};function h(t){var a=t.detail;if(s.initialRender)d(Object(O.a)(Object(O.a)({},a),{},{initialRender:!1}));else{var n=Object(N.a)(s.animCardsInitial),r=Object(N.a)(s.animCardsTarget),o=Object(N.a)(s.animCardsName);a.opponents&&function(e,t,a,n){for(var r=e.drawPile,o=e.discardPile,i=e.opponents,l=e.playerCards,c=e.pCardChangedIndices,d=60/e.opponents.length,b=(100-d)/e.opponents.length,p=0;p<i.length;p++)if(!Object.is(i[p].cards,s.opponents[p].cards)){var y=i[p].cards-s.opponents[p].cards;if(y>0)for(var h=0;h<y;h++)a.push({top:5,left:d/2+b*p}),n.push("nonameCard");else if(y<0)for(var E=0;E>y;E--)t.push({top:5,left:d/2+b*p}),n.push("nonameCard")}if(!Object.is(o,s.discardPile)){var g=o.length-s.discardPile.length;if(g>0)for(var k=0;k<g;k++)a.push({top:f.y,left:f.x}),n.push(e.discardPile[e.discardPile.length-1]);else if(g<0)for(var C=0;C>g;C--)t.push({top:f.y,left:f.x})}if(!Object.is(r,s.drawPile)){var w=r-s.drawPile;if(w>0)for(var N=0;N<w;N++)a.push({top:u.y,left:u.x+-1/s.drawPile});else if(w<0)for(var O=0;O>w;O--)t.push({top:u.y,left:u.x+-1/s.drawPile})}if(!Object.is(l,s.playerCards)){var j,x=l.length-s.playerCards.length,I=Object(m.a)(c);try{for(I.s();!(j=I.n()).done;){var D=j.value;x>0?a.push({top:v.y,left:v.x+71/l.length*D}):x<0&&t.push({top:v.y,left:v.x+71/l.length*D}),n.push(e.playerCards[D])}}catch(S){I.e(S)}finally{I.f()}}}(a,n,r,o),n.length!==r.length&&(n=[],r=[],o=[]),d(Object(O.a)(Object(O.a)({},a),{},{animCardsTarget:r,animCardsInitial:n,animCardsName:o}))}e.currentTurn=a.currentTurn}Object(n.useEffect)((function(){return s.initialRender&&y.send("get_game_state",{lobbyID:e.lobbyID}),y.addEventListener("update_game_state",h),function(){y.removeEventListener("update_game_state",h)}}));for(var E=[],g=0;g<s.animCardsInitial.length;g++){var k=[{top:"".concat(s.animCardsInitial[g].top,"%"),left:"".concat(s.animCardsInitial[g].left,"%")},{top:"".concat(s.animCardsTarget[g].top,"%"),left:"".concat(s.animCardsTarget[g].left,"%"),opacity:1,offset:.93},{top:"".concat(s.animCardsTarget[g].top,"%"),left:"".concat(s.animCardsTarget[g].left,"%"),opacity:0}];E.push(r.a.createElement(j.Animation,{key:g,keyframes:k,timing:{duration:1e3,easing:"ease-in",delay:0,iterations:1,direction:"normal",fill:"forwards"},onFinish:function(){d({animCardsInitial:[],animCardsTarget:[],animCardsName:[]})}},r.a.createElement("div",{className:"AnimatedCard ".concat(s.animCardsName[g])})))}var C=s.favorTarget,w=s.insertingExploding,x=s.currentTurn,I=s.drewExploding,F=s.playerCards,R=s.drawPile,B=s.discardPile;return r.a.createElement("div",{className:"GameWrapper"},r.a.createElement("div",{className:"Game"},r.a.createElement(H,{initialPos:{x:73,y:32},size:{width:24,height:30}}),r.a.createElement(_,{opponents:s.opponents,isStealing:s.isStealing,favorTarget:s.favorTarget,askingFavor:s.askingFavor,selectStealCard:function(t,a){var n=e.lobbyID;y.send("steal_card",{lobbyID:n,cardIndex:a,from:t}),d({isStealing:!1}),i([])},selectFavorCard:function(){if(!(o.length<1)){var t=e.lobbyID;o[0]>=0&&(y.send("give_favor_card",{lobbyID:t,to:s.favorTarget,card:s.playerCards[o[0]]}),d({favorTarget:void 0}),i([]))}},selectFavorVictim:function(t){var a=e.lobbyID;y.send("get_favor_from",{lobbyID:a,from:t}),d({askingFavor:!1})}}),E,w&&r.a.createElement(S,{type:"unselectable",position:{top:u.y-5+"%",left:u.x+"%"},size:{width:"40%",height:"28%"}}),r.a.createElement(D,{cards:R,initialPos:u,boundary:{width:w?40:10},hoverable:w,selectable:w,name:s.currentTurn===e.ID?"Draw Card":void 0,setSelectPosition:function(t){return function(t){var a=e.lobbyID;y.send("set_exploding_pos",{index:t,lobbyID:a})}(t)}}),x===e.ID&&!I&&!s.askingFavor&&!s.isStealing&&r.a.createElement(S,{type:"selectable",position:{top:u.y-5+"%",left:u.x+"%"},size:{width:"10%",height:"28%"},clickHandler:function(){return function(){var t=e.lobbyID,a=e.currentTurn,n=e.ID;s.drewExploding||a!==n||y.send("end_turn",{lobbyID:t})}()}}),r.a.createElement(D,{cards:B,initialPos:f,boundary:{width:8},hoverable:!1,name:"Play Cards"}),(s.playerCards.indexOf("nope")>-1||x===e.ID)&&r.a.createElement(S,{type:"selectable",position:{top:f.y-5+"%",left:f.x+"%"},size:{width:"10%",height:"28%"},clickHandler:function(){return function(){var t=e.lobbyID,a=e.currentTurn,n=e.ID,r=o.map((function(e){return s.playerCards[e]}));r.length<1||r[0].includes("cat")&&r.length<2||"nope"!==r[0]&&a!==n||(y.send("play_cards",{lobbyID:t,cards:r}),i([]))}()}}),r.a.createElement(D,{cards:F,initialPos:v,boundary:{width:80},selectable:!0,hoverable:!0,favorTarget:C,selectedCards:o,changeSelectedCards:function(e){return i(e)}}),s.isDead&&r.a.createElement(S,{type:"dead",position:{top:v.y+"%",left:v.x+"%"},size:{width:"80%",height:"23%"}}),s.currentTurn===e.ID&&r.a.createElement(L,{duration:3,msg:"It's your turn!"}),s.drewExploding&&r.a.createElement(L,{duration:5,msg:"You drew an exploding kitten!"}),s.favorTarget&&r.a.createElement(L,{duration:5,msg:s.opponents.find((function(e){return e.id===s.favorTarget})).name+" is asking you for a favor! Give them a card of your choice."}),s.turnsLeft>1&&r.a.createElement(L,{duration:5,msg:"You have been attacked!, draw a card ".concat(s.turnsLeft,"x to end your turn.")}),s.insertingExploding&&r.a.createElement(L,{duration:5,msg:"Select a spot in the draw pile to hide the exploding kitten"}),s.futureCards.length>0&&r.a.createElement(T,{cards:s.futureCards,resetFutureCards:function(){return d({futureCards:[]})}}),s.winner&&r.a.createElement(P,{winner:s.winner,opponents:s.opponents,ID:e.ID})))},R=(a(162),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Loading"})}}]),a}(r.a.Component)),B=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={socket:null,socketReady:!1,lobbyID:void 0,playerName:void 0,ID:void 0,isHost:!1,inGame:!1,currentTurn:void 0},n.setPlayerName=n.setPlayerName.bind(Object(l.a)(n)),n.websocketConnect=n.websocketConnect.bind(Object(l.a)(n)),n.onCloseCallback=n.onCloseCallback.bind(Object(l.a)(n)),n.onOpenCallback=n.onOpenCallback.bind(Object(l.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.socket;e&&0!==e.readyState||(console.log("Connecting..."),this.websocketConnect())}},{key:"onCloseCallback",value:function(){this.setState({socketReady:!1})}},{key:"onOpenCallback",value:function(){this.setState({socketReady:!0})}},{key:"websocketConnect",value:function(){var e=this;y.addEventListener("set_id",(function(t){e.setState({ID:t.detail})})),document.addEventListener("socket_state_change",(function(t){t.detail===WebSocket.CLOSED?e.setState({socketReady:!1}):t.detail===WebSocket.OPEN&&e.setState({socketReady:!0})}))}},{key:"setPlayerName",value:function(e){this.setState({playerName:e})}},{key:"render",value:function(){var e=this.state,t=e.socketReady,a=e.playerName;if(!t)return r.a.createElement(R,null);var n=a?null:r.a.createElement(w,{setNameHandler:this.setPlayerName});return r.a.createElement(k.a,null,r.a.createElement(p.Provider,{value:this.state},r.a.createElement("div",{className:"App"},n,a&&r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",component:C}),r.a.createElement(f.a,{exact:!0,path:"/createlobby",component:E}),r.a.createElement(f.a,{exact:!0,path:"/lobby/:id",component:E}),r.a.createElement(f.a,{path:"/browser",component:g}),r.a.createElement(f.a,{exact:!0,path:"/game",component:F})))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},67:function(e,t,a){e.exports=a(163)},72:function(e,t,a){},73:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.913fe1f0.chunk.js.map